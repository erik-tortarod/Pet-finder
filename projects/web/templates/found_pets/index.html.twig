{% extends 'base.html.twig' %}

{% block title %}Mascotas Encontradas
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="{{ asset('page/found_pets/styles.css') }}">
{% endblock %}

{% block body %}
	<section class="bg-white shadow">
		<div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
			<h1 class="text-3xl font-bold text-gray-900">Mascotas Buscadas</h1>
			<p class="mt-2 text-gray-600">Encuentra mascotas perdidas en tu zona</p>
		</div>
	</section>

	<section class="bg-white border-b">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
			<div class="grid grid-cols-1 md:grid-cols-4 gap-4">
				<div class="md:col-span-2">
					<div class="relative">
						<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
							{% include 'components/Icon.html.twig' with {name: 'search', size: 20, class: 'text-gray-400'} %}
						</div>
						<input type="text" placeholder="Buscar por nombre, descripción ..." class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"/>
					</div>
				</div>

				<div>
					<select class="block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
						<option value="">Tipo de animal</option>
						<option value="perro">Perro</option>
						<option value="gato">Gato</option>
						<option value="ave">Ave</option>
						<option value="otro">Otro</option>
					</select>
				</div>

				<div>
					<select class="block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
						<option value="">Zona</option>
						<option value="centro">Centro</option>
						<option value="norte">Norte</option>
						<option value="sur">Sur</option>
						<option value="este">Este</option>
						<option value="oeste">Oeste</option>
					</select>
				</div>
			</div>

			<div class="mt-4">
				<h3 class="text-sm font-medium text-gray-700 mb-2">Filtros rápidos:</h3>
				<div class="flex flex-wrap gap-2">
					<button class="tag tag-active">Pequeño</button>
					<button class="tag tag-innactive">Grande</button>
					<button class="tag tag-innactive">Blanco</button>
					<button class="tag tag-innactive">Negro</button>
					<button class="tag tag-innactive">Marrón</button>
					<button class="tag tag-innactive">Con collar</button>
					<button class="tag tag-innactive">Sin collar</button>
				</div>
			</div>
		</div>
	</section>

	<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" data-found-pets-url="{{ path('app_found_pets') }}">
		<div id="found-animals-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
			{% if foundAnimals is not empty %}
				{% include 'found_pets/_found_animals_list.html.twig' with {'foundAnimals': foundAnimals} %}
			{% else %}
				<div class="col-span-full text-center py-12">
					{% include 'components/Icon.html.twig' with {name: 'paw', size: 64, class: 'mx-auto text-gray-300 mb-4'} %}
					<h3 class="text-lg font-medium text-gray-900 mb-2">No hay mascotas perdidas</h3>
					<p class="text-gray-500">No se encontraron mascotas perdidas en este momento.</p>
				</div>
			{% endif %}
		</div>
		<div id="loading" class="text-center py-6 hidden">
			<div class="flex justify-center">
				<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
			</div>
		</div>
	</section>

	<div id="contactModal" class="hidden fixed inset-0 bg-gray-900/40 overflow-y-auto h-full w-full z-50 flex items-center justify-center">
		<div class="relative mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
			<div class="mt-3">
				<div class="flex items-center justify-between mb-4">
					<h3 class="text-lg font-semibold text-gray-900">Información de Contacto</h3>
					<button onclick="closeContactModal()" class="text-gray-400 hover:text-gray-600">
						{% include 'components/Icon.html.twig' with {name: 'x', size: 20, class: 'text-xl'} %}
					</button>
				</div>
				<div class="text-center mb-6">
					<h4 id="modalPetName" class="text-xl font-bold text-blue-600"></h4>
					<p class="text-sm text-gray-600 mt-1">Mascota encontrada</p>
				</div>
				<div class="space-y-4 mb-6">
					<div class="flex items-center p-3 bg-gray-50 rounded-lg">
						<div class="flex-shrink-0">
							{% include 'components/Icon.html.twig' with {name: 'phone', size: 20, class: 'text-blue-600'} %}
						</div>
						<div class="ml-3">
							<p class="text-sm font-medium text-gray-900">Teléfono</p>
							<p id="modalPhone" class="text-sm text-gray-600"></p>
						</div>
					</div>
					<div class="flex items-center p-3 bg-gray-50 rounded-lg">
						<div class="flex-shrink-0">
							{% include 'components/Icon.html.twig' with {name: 'mail', size: 20, class: 'text-blue-600'} %}
						</div>
						<div class="ml-3">
							<p class="text-sm font-medium text-gray-900">Email</p>
							<p id="modalEmail" class="text-sm text-gray-600"></p>
						</div>
					</div>
				</div>
				<div class="flex space-x-3">
					<button onclick="sendWhatsApp()" class="flex-1 bg-green-500 text-white py-3 px-4 rounded-md hover:bg-green-600 transition-colors flex items-center justify-center">
						{% include 'components/Icon.html.twig' with {name: 'whatsapp', size: 16, class: 'mr-2'} %}WhatsApp
					</button>
					<button onclick="sendEmail()" class="flex-1 bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center">
						{% include 'components/Icon.html.twig' with {name: 'mail', size: 16, class: 'mr-2'} %}Email
					</button>
				</div>
				<div class="mt-4 text-center">
					<p class="text-xs text-gray-500">Haz clic en WhatsApp o Email para contactar directamente</p>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="{{ asset('page/found_pets/contact_modal.js') }}"></script>
	<script src="{{ asset('page/found_pets/infinite_scroll.js') }}"></script>
{% endblock %}
